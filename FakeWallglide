local Players = game:GetService("Players")
local UIS = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")
local player = Players.LocalPlayer
local DashSpeed = 150
local DashLength = 0.2
local Cooldown = 0
local IsOn = nil
local TrashTable = {}

local function deselectCurrentTool()
    local character = player.Character
    if character and character:FindFirstChildOfClass("Tool") then
        local tool = character:FindFirstChildOfClass("Tool")
        tool.Parent = player.Backpack
    end
end
local function equipGrenade2()
    local backpack = player:FindFirstChild("Backpack")
    if not backpack then
        return false
    end
    local grenadeTool = backpack:FindFirstChild("Grenade 2")
    if grenadeTool then
        grenadeTool.Parent = player.Character
        return true
    end

    return false
end
local function executeDash()
    if IsOn then return end
    IsOn = true
    deselectCurrentTool()
    local equipped = equipGrenade2()
    if not equipped then
        IsOn = nil
        return
    end
    local character = player.Character
    if character and character:FindFirstChild("HumanoidRootPart") then
        local humanoidRootPart = character.HumanoidRootPart
        local bodyVelocity = Instance.new("BodyVelocity", humanoidRootPart)
        bodyVelocity.MaxForce = Vector3.new(100000, 200, 100000)
        bodyVelocity.Velocity = humanoidRootPart.CFrame.LookVector * DashSpeed
        TrashTable[character] = bodyVelocity
        local tweenInfo = TweenInfo.new(DashLength, Enum.EasingStyle.Linear, Enum.EasingDirection.InOut, 0, true, 0)
        TweenService:Create(humanoidRootPart, tweenInfo, {}):Play()
        task.wait(DashLength)
        bodyVelocity:Destroy()
        TrashTable[character] = nil
        task.wait(Cooldown)
    end
    IsOn = nil
end
UIS.InputBegan:Connect(function(input, isTyping)
    if isTyping then return end
    if input.KeyCode == Enum.KeyCode.V then -- Cambiar 'V' por cualquier tecla que desees
        executeDash()
    end
end)
