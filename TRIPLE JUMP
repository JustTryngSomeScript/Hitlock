

local player = game.Players.LocalPlayer
local mouse = player:GetMouse()
local hasDoubleJumped = false
game:GetService("UserInputService").InputBegan:Connect(function(input, isTyping)
    if isTyping then return end
    if input.KeyCode == keybind then
        -- Esperar que el personaje est√© disponible
        local character = player.Character or player.CharacterAdded:Wait()
        local humanoid = character:FindFirstChildOfClass("Humanoid")
        local rootPart = character:FindFirstChild("HumanoidRootPart")
        if humanoid and rootPart then
            local function performDoubleJump()
                if not hasDoubleJumped then
                    humanoid:ChangeState(Enum.HumanoidStateType.Jumping)
                    wait()
                    for _, item in ipairs(player.Backpack:GetChildren()) do
                        if item.Name == "C4" and item:FindFirstChild("RemoteEvent") then
                            item.Parent = character
                            wait()
                            humanoid:ChangeState(Enum.HumanoidStateType.Freefall)
                            wait(0.1)
                            humanoid:ChangeState(Enum.HumanoidStateType.Jumping)
                            item.RemoteEvent:FireServer(mouse.Hit.LookVector)
                            item.Parent = player.Backpack
                        end
                    end
                    wait(0.2) 
                    for _, item in ipairs(player.Backpack:GetChildren()) do
                        if item.Name == "Grenade" and item:FindFirstChild("RemoteEvent") then
                            item.Parent = character
                            humanoid:ChangeState(Enum.HumanoidStateType.Freefall)
                            wait(0.1)
                            humanoid:ChangeState(Enum.HumanoidStateType.Jumping)
                            item:Activate()
                            item.Parent = player.Backpack
                        end
                    end
                    hasDoubleJumped = true
                end
            end
            performDoubleJump()
        end
    end
end)
